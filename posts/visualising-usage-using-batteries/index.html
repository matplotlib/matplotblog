<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Battery Charts - Visualise usage rates & more &#183; Matplotblog</title><meta name=description content="A tutorial on how to show usage rates and more using batteries"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link href=https://matplotlib.org/matplotblog/css/concated.min.css rel=stylesheet><style>body{background:#ecedef url(https://matplotlib.org/matplotblog/bg_tiles.png)repeat}</style></head><body class=single-body><nav class="nav-bar side-padding"><h1 class=nav-header><a href=https://matplotlib.org/matplotblog/ class=nav-text><img src=https://matplotlib.org/matplotblog/mpl_logo.png></a></h1><a href=https://matplotlib.org/matplotblog/index.xml><img src=https://matplotlib.org/matplotblog/rss.svg style=width:25px;margin:10px alt="RSS feed"></a><div class=hamburger-menu><button onclick=hamburgerMenuPressed.call(this) aria-haspopup=true aria-expanded=false aria-controls=menu aria-label=Menu>
<span></span><span></span></button><ul id=menu class=hamburger-menu-overlay><li><a href=https://matplotlib.org/matplotblog/ class=hamburger-menu-overlay-link>Home</a></li><li><a href=https://matplotlib.org/matplotblog/posts/how-to-contribute/ class=hamburger-menu-overlay-link>How to Contribute</a></li><li><a href=https://matplotlib.org/matplotblog/categories/3d class=hamburger-menu-overlay-link>3d</a></li><li><a href=https://matplotlib.org/matplotblog/categories/academia class=hamburger-menu-overlay-link>Academia</a></li><li><a href=https://matplotlib.org/matplotblog/categories/art class=hamburger-menu-overlay-link>Art</a></li><li><a href=https://matplotlib.org/matplotblog/categories/editorial class=hamburger-menu-overlay-link>Editorial</a></li><li><a href=https://matplotlib.org/matplotblog/categories/graphs class=hamburger-menu-overlay-link>Graphs</a></li><li><a href=https://matplotlib.org/matplotblog/categories/gsoc class=hamburger-menu-overlay-link>Gsoc</a></li><li><a href=https://matplotlib.org/matplotblog/categories/gsod class=hamburger-menu-overlay-link>Gsod</a></li><li><a href=https://matplotlib.org/matplotblog/categories/industry class=hamburger-menu-overlay-link>Industry</a></li><li><a href=https://matplotlib.org/matplotblog/categories/news class=hamburger-menu-overlay-link>News</a></li><li><a href=https://matplotlib.org/matplotblog/categories/tutorials class=hamburger-menu-overlay-link>Tutorials</a></li><li><a href=https://matplotlib.org class=hamburger-menu-overlay-link target=blank>About</a></li></ul></div></nav><main class="content side-text-padding"><article class="post dropcase"><header class=post-header><h1 class=post-title>Battery Charts - Visualise usage rates & more</h1><p class=post-date>Posted <time datetime=2021-08-19>Aug 19, 2021</time>
<span class=post-author>&mdash; By Rithwik Rajendran</span></p></header><picture class=post-figure>
<source srcset=https://matplotlib.org/matplotblog/posts/visualising-usage-using-batteries/Liverpool_Usage_Chart_hu4f956bc3b774b1dccaa53dba0414a83d_130796_800x0_resize_lanczos_2.png><img src=https://matplotlib.org/matplotblog/posts/visualising-usage-using-batteries/Liverpool_Usage_Chart_hu4f956bc3b774b1dccaa53dba0414a83d_130796_800x0_resize_lanczos_2.png alt="my image description"></picture><h1 id=introduction>Introduction</h1><p>I have been creating common visualisations like scatter plots, bar charts, beeswarms etc. for a while and thought about doing something different. Since I'm an avid football fan, I thought of ideas to represent players&rsquo; usage or involvement over a period (a season, a couple of seasons). I have seen some cool visualisations like donuts which depict usage and I wanted to make something different and simple to understand. I thought about representing batteries as a form of player usage and it made a lot of sense.</p><p>For players who have been barely used (played fewer minutes) show a <em><strong>large amount of battery</strong></em> present since they have enough energy left in the tank. And for heavily used players, do the opposite i.e. show <em><strong>drained or less amount of battery</strong></em></p><p>So, what is the purpose of a battery chart? You can use it to show usage, consumption, involvement, fatigue etc. (anything usage related).</p><p>The image below is a sample view of how a battery would look in our figure, although a single battery isn't exactly what we are going to recreate in this tutorial.</p><p><img src=battery.png alt="A sample visualisation"></p><h1 id=tutorial>Tutorial</h1><p>Before jumping on to the tutorial, I would like to make it known that the function can be tweaked to fit accordingly depending on the number of subplots or any other size parameter. Coming to the figure we are going to plot, there are a series of steps that is to be considered which we will follow one by one. The following are those steps:-</p><ol><li>Outlining what we are going to plot</li><li>Import necessary libraries</li><li>Write a function to draw the battery<ul><li>This is the function that will be called to plot the battery chart</li></ul></li><li>Read the data and plot the chart accordingly<ul><li>We will demonstrate it with an example</li></ul></li></ol><h2 id=span-styletext-decoration-underlineplot-outlinespan><span style=text-decoration:underline>Plot Outline</span></h2><p>What is our use case?</p><ul><li>We are given a dataset where we have data of Liverpool's players and their minutes played in the last 2 seasons (for whichever club they for played in that time period). We will use this data for our visualisation.</li><li>The final visualisation is the featured image of this blog post. We will navigate step-by-step as to how we'll create the visualisation.</li></ul><h2 id=span-styletext-decoration-underlineimporting-librariesspan><span style=text-decoration:underline>Importing Libraries</span></h2><p>The first and foremost part is to import the essential libraries so that we can leverage the functions within. In this case, we will import the libraries we need.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> pandas <span style=color:#f92672>as</span> pd
<span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#f92672>as</span> plt
<span style=color:#f92672>from</span> matplotlib.path <span style=color:#f92672>import</span> Path
<span style=color:#f92672>from</span> matplotlib.patches <span style=color:#f92672>import</span> FancyBboxPatch, PathPatch, Wedge
</code></pre></div><p>The functions imported from <code>matplotlib.path</code> and <code>matplotlib.patches</code> will be used to draw lines, rectangles, boxes and so on to display the battery as it is.</p><h2 id=span-styletext-decoration-underlinedrawing-the-battery---a-functionspan><span style=text-decoration:underline>Drawing the Battery - A function</span></h2><p>The next part is to define a function named <code>draw_battery()</code>, which will be used to draw the battery. Later on, we will call this function by specifying certain parameters to build the figure as we require. The following below is the code to build the battery -</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>draw_battery</span>(fig, ax, percentage<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>, bat_ec<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>grey</span><span style=color:#e6db74>&#34;</span>,
                 tip_fc<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>none</span><span style=color:#e6db74>&#34;</span>, tip_ec<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>grey</span><span style=color:#e6db74>&#34;</span>, 
                 bol_fc<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#fdfdfd</span><span style=color:#e6db74>&#34;</span>, bol_ec<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>grey</span><span style=color:#e6db74>&#34;</span>, invert_perc<span style=color:#f92672>=</span>False):
    <span style=color:#e6db74></span><span style=color:#e6db74>&#39;&#39;&#39;</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    Parameters</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    ----------</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    fig : figure</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The figure object for the plot</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    ax : axes</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The axes/axis variable of the figure.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    percentage : int, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        This is the battery percentage - size of the fill. The default is 0.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    bat_ec : str, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The edge color of the battery/cell. The default is </span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>grey</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    tip_fc : str, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The fill/face color of the tip of battery. The default is </span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>none</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    tip_ec : str, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The edge color of the tip of battery. The default is </span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>grey</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    bol_fc : str, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The fill/face color of the lighning bolt. The default is </span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#fdfdfd</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    bol_ec : str, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        The edge color of the lighning bolt. The default is </span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>grey</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    invert_perc : bool, optional</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        A flag to invert the percentage shown inside the battery. The default is False</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    Returns</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    -------</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    None.</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>    </span><span style=color:#e6db74>&#39;&#39;&#39;</span>
    <span style=color:#66d9ef>try</span>:
        fig<span style=color:#f92672>.</span>set_size_inches((<span style=color:#ae81ff>15</span>,<span style=color:#ae81ff>15</span>))
        ax<span style=color:#f92672>.</span>set(xlim<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>20</span>), ylim<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>))
        ax<span style=color:#f92672>.</span>axis(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>off</span><span style=color:#e6db74>&#34;</span>)
        <span style=color:#66d9ef>if</span> invert_perc <span style=color:#f92672>==</span> True:
            percentage <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>-</span> percentage
        <span style=color:#75715e># color options - #fc3d2e red &amp; #53d069 green &amp; #f5c54e yellow</span>
        bat_fc <span style=color:#f92672>=</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#fc3d2e</span><span style=color:#e6db74>&#34;</span> <span style=color:#66d9ef>if</span> percentage <span style=color:#f92672>&lt;</span><span style=color:#f92672>=</span> <span style=color:#ae81ff>20</span> <span style=color:#66d9ef>else</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#53d069</span><span style=color:#e6db74>&#34;</span> <span style=color:#66d9ef>if</span> percentage <span style=color:#f92672>&gt;</span><span style=color:#f92672>=</span> <span style=color:#ae81ff>80</span> <span style=color:#66d9ef>else</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#f5c54e</span><span style=color:#e6db74>&#34;</span>
        
        <span style=color:#e6db74></span><span style=color:#e6db74>&#39;&#39;&#39;</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        Static battery and tip of battery</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        </span><span style=color:#e6db74>&#39;&#39;&#39;</span>
        battery <span style=color:#f92672>=</span> FancyBboxPatch((<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>2.1</span>), <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>0.8</span>, 
                                 <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>round, pad=0.2, rounding_size=0.5</span><span style=color:#e6db74>&#34;</span>,
                                 fc<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>none</span><span style=color:#e6db74>&#34;</span>, ec<span style=color:#f92672>=</span>bat_ec, fill<span style=color:#f92672>=</span>True,
                                 ls<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>-</span><span style=color:#e6db74>&#34;</span>, lw<span style=color:#f92672>=</span><span style=color:#ae81ff>1.5</span>)
        tip <span style=color:#f92672>=</span> Wedge((<span style=color:#ae81ff>15.35</span>, <span style=color:#ae81ff>2.5</span>), <span style=color:#ae81ff>0.2</span>, <span style=color:#ae81ff>270</span>, <span style=color:#ae81ff>90</span>, fc<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>none</span><span style=color:#e6db74>&#34;</span>, 
                    ec<span style=color:#f92672>=</span>bat_ec, fill<span style=color:#f92672>=</span>True,
                    ls<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>-</span><span style=color:#e6db74>&#34;</span>, lw<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>)
        ax<span style=color:#f92672>.</span>add_artist(battery)
        ax<span style=color:#f92672>.</span>add_artist(tip)
        
        <span style=color:#e6db74></span><span style=color:#e6db74>&#39;&#39;&#39;</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        Filling the battery cell with the data</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        </span><span style=color:#e6db74>&#39;&#39;&#39;</span>
        filler <span style=color:#f92672>=</span> FancyBboxPatch((<span style=color:#ae81ff>5.1</span>, <span style=color:#ae81ff>2.13</span>), (percentage<span style=color:#f92672>/</span><span style=color:#ae81ff>10</span>)<span style=color:#f92672>-</span><span style=color:#ae81ff>0.2</span>, <span style=color:#ae81ff>0.74</span>, 
                                <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>round, pad=0.2, rounding_size=0.5</span><span style=color:#e6db74>&#34;</span>, 
                                fc<span style=color:#f92672>=</span>bat_fc, ec<span style=color:#f92672>=</span>bat_fc, fill<span style=color:#f92672>=</span>True,
                                ls<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>-</span><span style=color:#e6db74>&#34;</span>, lw<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>)
        ax<span style=color:#f92672>.</span>add_artist(filler)
        
        <span style=color:#e6db74></span><span style=color:#e6db74>&#39;&#39;&#39;</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        Adding a lightning bolt in the centre of the cell</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        </span><span style=color:#e6db74>&#39;&#39;&#39;</span>
        verts <span style=color:#f92672>=</span> [
            (<span style=color:#ae81ff>10.5</span>, <span style=color:#ae81ff>3.1</span>), <span style=color:#75715e>#top</span>
            (<span style=color:#ae81ff>8.5</span>, <span style=color:#ae81ff>2.4</span>), <span style=color:#75715e>#left</span>
            (<span style=color:#ae81ff>9.5</span>, <span style=color:#ae81ff>2.4</span>), <span style=color:#75715e>#left mid</span>
            (<span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1.9</span>), <span style=color:#75715e>#bottom</span>
            (<span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>2.6</span>), <span style=color:#75715e>#right </span>
            (<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2.6</span>), <span style=color:#75715e>#right mid</span>
            (<span style=color:#ae81ff>10.5</span>, <span style=color:#ae81ff>3.1</span>), <span style=color:#75715e>#top</span>
        ]

        codes <span style=color:#f92672>=</span> [
            Path<span style=color:#f92672>.</span>MOVETO,
            Path<span style=color:#f92672>.</span>LINETO,
            Path<span style=color:#f92672>.</span>LINETO,
            Path<span style=color:#f92672>.</span>LINETO,
            Path<span style=color:#f92672>.</span>LINETO,
            Path<span style=color:#f92672>.</span>LINETO,
            Path<span style=color:#f92672>.</span>CLOSEPOLY,
        ]
        path <span style=color:#f92672>=</span> Path(verts, codes)
        bolt <span style=color:#f92672>=</span> PathPatch(path, fc<span style=color:#f92672>=</span>bol_fc,
                         ec<span style=color:#f92672>=</span>bol_ec, lw<span style=color:#f92672>=</span><span style=color:#ae81ff>1.5</span>)
        ax<span style=color:#f92672>.</span>add_artist(bolt)
    <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
        <span style=color:#f92672>import</span> traceback
        <span style=color:#66d9ef>print</span>(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>EXCEPTION FOUND!!! SAFELY EXITING!!! Find the details below:</span><span style=color:#e6db74>&#34;</span>)
        traceback<span style=color:#f92672>.</span>print_exc()

</code></pre></div><h2 id=span-styletext-decoration-underlinereading-the-dataspan><span style=text-decoration:underline>Reading the Data</span></h2><p>Once we have created the API or function, we can now implement the same. And for that, we need to feed in required data. In our example, we have a dataset that has the list of Liverpool players and the minutes they have played in the past two seasons. The data was collected from <a href=www.fbref.com>Football Reference aka FBRef</a>.</p><p>We use the read excel function in the pandas library to read our dataset that is stored as an excel file.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>data <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_excel(<span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Liverpool Minutes Played.xlsx</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>Now, let us have a look at how the data looks by listing out the first five rows of our dataset -</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>data<span style=color:#f92672>.</span>head()
</code></pre></div><p><img src=head_data.PNG alt="The first 5 rows of our dataset"></p><h2 id=span-styletext-decoration-underlineplotting-our-dataspan><span style=text-decoration:underline>Plotting our data</span></h2><p>Now that everything is ready, we go ahead and plot the data. We have 25 players in our dataset, so a 5 x 5 figure is the one to go for. We'll also add some headers and set the colors accordingly.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>fig, ax <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplots(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>, figsize<span style=color:#f92672>=</span>(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>5</span>))
facecolor <span style=color:#f92672>=</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#00001a</span><span style=color:#e6db74>&#34;</span>
fig<span style=color:#f92672>.</span>set_facecolor(facecolor)
fig<span style=color:#f92672>.</span>text(<span style=color:#ae81ff>0.35</span>, <span style=color:#ae81ff>0.95</span>, <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Liverpool: Player Usage/Involvement</span><span style=color:#e6db74>&#34;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>white</span><span style=color:#e6db74>&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>18</span>, fontname<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Libre Baskerville</span><span style=color:#e6db74>&#34;</span>, fontweight<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>bold</span><span style=color:#e6db74>&#34;</span>)
fig<span style=color:#f92672>.</span>text(<span style=color:#ae81ff>0.25</span>, <span style=color:#ae81ff>0.92</span>, <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Data from 19/20 and 20/21 | Battery percentage indicate usage | less battery = played more/ more involved</span><span style=color:#e6db74>&#34;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>white</span><span style=color:#e6db74>&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span>, fontname<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Libre Baskerville</span><span style=color:#e6db74>&#34;</span>)
</code></pre></div><p>We have now now filled in appropriate headers, figure size etc. The next step is to plot all the axes i.e. batteries for each and every player. <code>p</code> is the variable used to iterate through the dataframe and fetch each players data. The <code>draw_battery()</code> function call will obviously plot the battery. We also add the required labels along with that - player name and usage rate/percentage in this case.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>p <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#75715e>#The variable that&#39;ll iterate through each row of the dataframe (for every player)</span>
<span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>):
    <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>):
        ax[i, j]<span style=color:#f92672>.</span>text(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>4</span>, str(data<span style=color:#f92672>.</span>iloc[p, <span style=color:#ae81ff>0</span>]), color<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>white</span><span style=color:#e6db74>&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>14</span>, fontname<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Lora</span><span style=color:#e6db74>&#34;</span>, va<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>center</span><span style=color:#e6db74>&#39;</span>, ha<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>center</span><span style=color:#e6db74>&#39;</span>)
        ax[i, j]<span style=color:#f92672>.</span>set_facecolor(facecolor)
        draw_battery(fig, ax[i, j], round(data<span style=color:#f92672>.</span>iloc[p, <span style=color:#ae81ff>8</span>]), invert_perc<span style=color:#f92672>=</span>True)
        <span style=color:#e6db74></span><span style=color:#e6db74>&#39;&#39;&#39;</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        Add the battery percentage as text if a label is required</span><span style=color:#e6db74>
</span><span style=color:#e6db74></span><span style=color:#e6db74>        </span><span style=color:#e6db74>&#39;&#39;&#39;</span>
        ax[i, j]<span style=color:#f92672>.</span>text(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>0.9</span>, <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Usage - </span><span style=color:#e6db74>&#34;</span><span style=color:#f92672>+</span> str(int(<span style=color:#ae81ff>100</span> <span style=color:#f92672>-</span> round(data<span style=color:#f92672>.</span>iloc[p, <span style=color:#ae81ff>8</span>]))) <span style=color:#f92672>+</span> <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>%</span><span style=color:#e6db74>&#34;</span>, fontsize<span style=color:#f92672>=</span><span style=color:#ae81ff>12</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>white</span><span style=color:#e6db74>&#34;</span>)
        p <span style=color:#f92672>+</span><span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</code></pre></div><p>Now that everything is almost done, we do some final touchup and this is a completely optional part anyway. Since the visualisation is focused on Liverpool players, I add Liverpool's logo and also add my watermark. Also, crediting the data source/provider is more of an ethical habit, so we go ahead and do that as well before displaying the plot.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>liv <span style=color:#f92672>=</span> Image<span style=color:#f92672>.</span>open(<span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>Liverpool.png</span><span style=color:#e6db74>&#39;</span>, <span style=color:#e6db74></span><span style=color:#e6db74>&#39;</span><span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;</span>)
liv <span style=color:#f92672>=</span> liv<span style=color:#f92672>.</span>resize((<span style=color:#ae81ff>80</span>, <span style=color:#ae81ff>80</span>))
liv <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>array(liv)<span style=color:#f92672>.</span>astype(np<span style=color:#f92672>.</span>float) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>
fig<span style=color:#f92672>.</span>figimage(liv, <span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>890</span>)
fig<span style=color:#f92672>.</span>text(<span style=color:#ae81ff>0.11</span>, <span style=color:#ae81ff>0.08</span>, <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>viz: Rithwik Rajendran/@rithwikrajendra</span><span style=color:#e6db74>&#34;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>lightgrey</span><span style=color:#e6db74>&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>14</span>, fontname<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Lora</span><span style=color:#e6db74>&#34;</span>)
fig<span style=color:#f92672>.</span>text(<span style=color:#ae81ff>0.8</span>, <span style=color:#ae81ff>0.08</span>, <span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>data: FBRef/Statsbomb</span><span style=color:#e6db74>&#34;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>lightgrey</span><span style=color:#e6db74>&#34;</span>, size<span style=color:#f92672>=</span><span style=color:#ae81ff>14</span>, fontname<span style=color:#f92672>=</span><span style=color:#e6db74></span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>Lora</span><span style=color:#e6db74>&#34;</span>)
plt<span style=color:#f92672>.</span>show()
</code></pre></div><p>So, we have the plot below. You can customise the design as you want in the <code>draw_battery()</code> function - change size, colours, shapes etc</p><p><img src=Liverpool_Usage_Chart.png alt=Usage_Chart_Liverpool></p></article></main><nav class="end-nav side-padding"></nav><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous onload=renderMathInElement(document.body);></script><script src=https://matplotlib.org/matplotblog/js/core.min.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>